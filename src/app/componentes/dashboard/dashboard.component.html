


<button class="btn btn-primary floating-menu-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu" aria-controls="offcanvasMenu">
  <i class="bi bi-list"></i>
</button>

  <div class="fixed-image-container">
    <img id="fixedImageIcon" class="fixed-image" src="#" alt="Logo Empresa" style="display: none;">
  </div>


<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasMenuLabel">Opciones</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="list-unstyled d-flex flex-column align-items-center">
      <li class="w-100 mb-3 text-center timer-info" style="font-size: 18px; font-weight: bold; color: #092865; padding: 10px; background-color: #f0f0f0; border-radius: 5px;">
        {{ remainingTime }}
      </li>
      <li class="w-100 text-center">
        <button class="btn btn-secondary logout-button1 w-100" (click)="logout()">Logout</button>
      </li>
    </ul>
  </div>
</div>


<div class="dashboard-container">

  <div id="successAlert" style="display: none;" class="alert alert-success">Datos de la empresa guardados con éxito.</div>



  <div class="card dashboard-card">

    <div class="program-title" id="portada" style="border-radius: 10px;" *ngIf="!isContentVisible">
      <h6 style="font-size: 12px; margin-bottom: 0px;">Orbita software</h6>
    </div>


    <!-- Botón Seleccionar provincia -->



    <div class="card mb-2 w-100 mt-3 ">
      <div class="card-body d-flex flex-column gap-3 px-2">
        <button (click)="abrirGoogleSheets2()" id="mano-de-obra-button2" class="btn btn-primary btn-block animate  w-100">PDF valor vivienda JULIO/2025</button>
        <div class="d-flex flex-row justify-content-between gap-2">
          <button class="btn btn-primary btn-block w-50 animate ">BONOS TEMU</button>
          <button class="btn btn-primary btn-block w-50 animate ">BIBLIOTECA</button>
        </div>
      </div>
    </div>

    <!-- Segunda tarjeta: Botones Empresa y Cliente verticales -->
    <div class="card mb-3 w-100">
      <div class="card-body d-flex flex-column gap-2 px-2">
        <button class="btn btn-primary btn-block  w-100 animate " data-bs-toggle="modal" data-bs-target="#exampleModal">DATOS DE TU EMPRESA</button>
        <button class="btn btn-primary btn-block  w-100 animate" data-bs-toggle="modal" data-bs-target="#clientModal">DATOS DEL CLIENTE</button>
      </div>
    </div>

  <h4 class="text-start">Nuevo Presupuesto</h4>
<div class="card table-card mt-2 mb-3">
  <div class="card-body">
    <h5 class="mb-3">Lista de tareas</h5>
    <div class="containerbuscar">
      <div class="search-container">
        <input class="input form-control" placeholder="Buscar tarea..." type="text" id="busqueda" (input)="buscar($event)">
      </div>
    </div>
    <p style="text-align: center;">SI NO ENCUENTRAS LA TAREA QUE NECESITAS BUSCA: TAREA GENERICA, Y AGREGA DESCRIPCIÓN Y PRECIO.</p>
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="col-40">Tarea</th>
            <!--th-- class="col-20">Rubro</!--th-->
            <!--th class="col-20">Categoría</!--th-->
            <th class="col-20">Costo/$</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tarea of tareasFiltradas" (click)="seleccionar(tarea)" class="hoverable-row">
            <td>{{ tarea.tarea }}</td>
            <!--td>{{ tarea.rubro }}</td-->
            <!--td>{{ tarea.categoria }}</!--td-->
            <td>{{ tarea.costo | currency:'USD':'symbol':'1.2-2' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="modal fade" id="miModal" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel1">Agregar Tarea</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="tarea" class="col-form-label">Tarea:</label>
                <textarea [(ngModel)]="tareaSeleccionada.tarea" name="tarea" class="form-control" rows="3"
                  style="margin-bottom: 20px; font-size: 14px; white-space: pre-wrap; overflow-wrap: break-word; background-image: linear-gradient(to top, #c7d0e9, #d7dbee, #e5e7f4, #f3f3f9, #ffffff); color: #092865; padding: 10px; resize: none; font-weight: bold;"
                  readonly></textarea>
              </div>
              <div class="mb-3">
                <label for="rubro" class="col-form-label">Rubro:</label>
                <input type="text" [(ngModel)]="tareaSeleccionada.rubro" name="rubro" class="form-control" id="rubro" readonly>
              </div>
              <div class="mb-3">
                <label for="categoria" class="col-form-label">Categoría:</label>
                <input type="text" [(ngModel)]="tareaSeleccionada.categoria" name="categoria" class="form-control" id="categoria" readonly>
              </div>
              <div class="row mb-3">
                <div class="col-6">
                  <label for="area" class="col-form-label">Área (m²/m³):</label>
                  <input type="number" [(ngModel)]="tareaSeleccionada.area" name="area" class="form-control" id="area" placeholder="Ingresa el área" required>
                </div>
                <div class="col-6">
                  <label for="modal-cost" class="col-form-label">Costo por m²/m³/ml:</label>
                  <input type="number" [(ngModel)]="tareaSeleccionada.costo" name="costo" class="form-control" id="cost"
                    style="color: #ab1444; font-weight: bold; text-align: center;" placeholder="Ingresa el costo" step="0.01" required>
                </div>
              </div>
              <div class="mb-3">
                <label for="description" class="col-form-label">Descripción:</label>
                <input type="text" [(ngModel)]="tareaSeleccionada.descripcion" name="descripcion" class="form-control" id="description" placeholder="Es opcional">
              </div>
              <div class="mb-3">
                <label for="discount" class="col-form-label">Descuento (%):</label>
                <input type="number" [(ngModel)]="tareaSeleccionada.descuento" name="descuento" class="form-control" id="discount" value="0">
              </div>
              <div class="modal-footer">
                <!--button-- type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</!button-->
                <button type="button" (click)="agregarTarea()" class="btn btn-primary" data-bs-dismiss="modal">Agregar</button>
                <!--button-- type="button" *ngIf="tareaSeleccionada.id" (click)="actualizarTarea()" class="btn btn-primary" data-bs-dismiss="modal">Actualizar</!--button-->
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="row mt-4">
<div class="w-100 d-flex justify-content-center mb-2">
      <button type="button" class="btn btn-success animate" style="font-weight:bold; border-radius: 10px; box-shadow: 0 2px 8px #0001;" data-bs-toggle="modal" data-bs-target="#provinciaModal">
        <i class="bi bi-geo-alt"></i> Seleccionar provincia
      </button>
    </div>

      <div class="col">
        <div class="input-group" style="padding:5px; margin: 2px; z-index: 0;">
          <input type="text" class="form-control" placeholder="%" [(ngModel)]="porcentajeBajar">
          <div class="input-group-append">
            <button class="btn btn-danger w-100" (click)="disminuirPrecios()">BAJAR</button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="input-group" style="padding:5px; margin: 2px; z-index: 0;">
          <input type="text" class="form-control" placeholder="%" [(ngModel)]="porcentajeSubir">
          <div class="input-group-append">
            <button class="btn btn-success w-100" (click)="ajustarPrecios()">SUBIR</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



    <!-- Modal Seleccionar provincia -->
    <div class="modal fade" id="provinciaModal" tabindex="-1" aria-labelledby="provinciaModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="provinciaModalLabel">Seleccionar provincia</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="selectProvincia" class="form-label">Provincia</label>
              <select id="selectProvincia" class="form-select" [(ngModel)]="provinciaSeleccionada" name="provinciaSeleccionada">
                <option value="" disabled selected>Seleccione una provincia</option>
                <option *ngFor="let provincia of provincias" [value]="provincia.nombre">{{ provincia.nombre }}</option>
              </select>
            </div>
            <div *ngIf="provincias.length === 0" class="text-muted">No hay provincias disponibles para el país seleccionado.</div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="button" class="btn btn-primary">Guardar selección</button>
          </div>
        </div>
      </div>
    </div>

<div *ngIf="mostrarTabla" class="container mt-4">
  <h5 class="text-primary">TAREAS A REALIZAR</h5>
  <div class="table-responsive">
    <table class="table table-striped table-bordered table-hover table-sm">
      <thead class="thead-light">
        <tr>
          <th class="text-center">Acciones</th>
          <th class="text-center">Tarea</th>
          <!--th-- class="text-center">Rubro</!--th-->
          <!--th-- class="text-center">Categoría</!--th-->
          <!--th class="text-center">Descripción</!--th-->
          <th class="text-center">Área (m²/m³)</th>
          <th class="text-center">Costo</th>
          <th class="text-center">Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tarea of tareasAgregadas; let i = index">
          <td class="text-center">
            <button *ngIf="tarea.id" (click)="eliminarTarea(tarea.id)" class="btn btn-outline-danger btn-sm rounded-circle">X</button>
          </td>
          <td>{{ tarea.tarea }}</td>
          <!--td>{{ tarea.rubro }}</td-->
          <!--td>{{ tarea.categoria }}</!--td-->
          <!--td>{{ tarea.descripcion }}</td-->
          <td>{{ tarea.area | number:'1.2-2' }}</td>
          <td>{{ tarea.costo | currency:'USD':'symbol':'1.2-2' }}</td>
          <td>{{ tarea.totalCost | currency:'USD':'symbol':'1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="mt-3" style="font-size: 22px; padding: 8px; margin-bottom: 20px; background-color: white; box-shadow: rgba(50, 50, 105, 0.15) 0px 2px 5px 0px, rgba(0, 0, 0, 0.05) 0px 1px 1px 0px;">
    Total: {{ calcularCostoTotal() | currency:'USD':'symbol':'1.2-2' }}
  </div>
</div>
  <button class="btn btn-primary btn-block  dashboard-btn-animate" (click)="verPresupuesto()" > Ver Presupuesto </button>

</div>

</div>








<!--div-- class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="clientModalLabel">Formulario de Datos del Cliente</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h2 id="confirmationMessage" style="display: none; color: green; text-align: center;">Datos guardados</h2>
        <form #clientForm="ngForm" (ngSubmit)="saveClientData(clientForm)">
          <div class="form-group mb-3">
            <label for="clientName">Nombre:</label>
            <input type="text" class="form-control" id="clientName" name="clientName" [(ngModel)]="clientName" required minlength="2" placeholder="Nombre del cliente" #name="ngModel">
            @if (name.touched && name.errors?.['required']) {
              <div class="text-danger">El nombre es obligatorio.</div>
            }
            @if (name.touched && name.errors?.['minlength']) {
              <div class="text-danger">El nombre debe tener al menos 2 caracteres.</div>
            }
          </div>
          <div class="form-group mb-3">
            <label for="contact">Contacto:</label>
            <input type="text" class="form-control" id="contact" name="clientContact" [(ngModel)]="clientContact" required pattern="\+?\d{7,15}" placeholder="Ej: +123456789" #contact="ngModel">
            @if (contact.touched && contact.errors?.['required']) {
              <div class="text-danger">El contacto es obligatorio.</div>
            }
            @if (contact.touched && contact.errors?.['pattern']) {
              <div class="text-danger">El contacto debe ser un número de teléfono válido (7-15 dígitos, puede incluir +).</div>
            }
          </div>
          <div class="form-group mb-3">
            <label for="email">Email:</label>
            <input type="email" class="form-control" id="email" name="clientEmail" [(ngModel)]="clientEmail" required email placeholder="Ej: cliente@example.com" #email="ngModel">
            @if (email.touched && email.errors?.['required']) {
              <div class="text-danger">El email es obligatorio.</div>
            }
            @if (email.touched && email.errors?.['email']) {
              <div class="text-danger">El email debe tener un formato válido.</div>
            }
          </div>
          <div class="form-group mb-3">
            <label for="clave">CUIT/Clave:</label>
            <input type="text" class="form-control" id="clave" name="clientClave" [(ngModel)]="clientClave" required pattern="\d{2}-\d{8}-\d{1}" placeholder="Ej: 30-12345678-9" #clave="ngModel">
            @if (clave.touched && clave.errors?.['required']) {
              <div class="text-danger">El CUIT es obligatorio.</div>
            }
            @if (clave.touched && clave.errors?.['pattern']) {
              <div class="text-danger">El CUIT debe tener el formato XX-XXXXXXXX-X.</div>
            }
          </div>
          <div class="form-group mb-3">
            <label for="direccion">Dirección:</label>
            <input type="text" class="form-control" id="direccion" name="clientDireccion" [(ngModel)]="clientDireccion" required minlength="5" placeholder="Ej: Av. Principal 123" #direccion="ngModel">
            @if (direccion.touched && direccion.errors?.['required']) {
              <div class="text-danger">La dirección es obligatoria.</div>
            }
            @if (direccion.touched && direccion.errors?.['minlength']) {
              <div class="text-danger">La dirección debe tener al menos 5 caracteres.</div>
            }
          </div>
          <div class="form-group mb-3">
            <label for="budgetDate">Fecha del Presupuesto:</label>
            <input type="date" class="form-control" id="budgetDate" name="budgetDate" [(ngModel)]="budgetDate" required #budgetDate="ngModel" (change)="onDateChange($event)">
            @if (budgetDate.touched && budgetDate.errors?.['required']) {
              <div class="text-danger">La fecha del presupuesto es obligatoria.</div>
            }
          </div>
          <div class="form-group mb-3">
            <label for="additionalDetails">Detalles Adicionales:</label>
            <textarea class="form-control" id="additionalDetails" name="additionalDetailsClient" [(ngModel)]="additionalDetailsClient" rows="3" placeholder="Detalles opcionales"></textarea>
          </div>
          <div class="modal-footer d-flex justify-content-between">
            <button type="button" class="btn btn-secondary">Lista</button>
            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal" [disabled]="!clientForm.valid || isSavingClient">
              <span *ngIf="!isSavingClient">Guardar</span>
              <span *ngIf="isSavingClient"><span class="spinner-border spinner-border-sm"></span> Guardando...</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</!--div-->


<div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="clientModalLabel">Formulario de Datos del Cliente</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h2 id="confirmationMessage" style="display: none; color: green; text-align: center;">Datos guardados</h2>
        <form #clientForm="ngForm" (ngSubmit)="saveClientData(clientForm)">
          <div class="form-group mb-3">
            <!--label for="clientName">Nombre:</!--label-->
            <input type="text" class="form-control" id="clientName" name="clientName" [(ngModel)]="clientName" required minlength="2" placeholder="Nombre del cliente" #name="ngModel">
            @if (name.touched && name.errors?.['required']) {
              <div class="text-danger">El nombre es obligatorio.</div>
            }
            @if (name.touched && name.errors?.['minlength']) {
              <div class="text-danger">El nombre debe tener al menos 2 caracteres.</div>
            }
          </div>
          <div class="form-group mb-3">
            <!--label for="contact">Contacto:</!--label-->
            <input type="text" class="form-control" id="contact" name="clientContact" [(ngModel)]="clientContact" required pattern="\+?\d{7,15}" placeholder="Teléfono" #contact="ngModel">
            @if (contact.touched && contact.errors?.['required']) {
              <div class="text-danger">El contacto es obligatorio.</div>
            }
            @if (contact.touched && contact.errors?.['pattern']) {
              <div class="text-danger">El contacto debe ser un número de teléfono válido (7-15 dígitos, puede incluir +).</div>
            }
          </div>
          <div class="form-group mb-3">
            <!--label for="email">Email:</!--label-->
            <input type="email" class="form-control" id="email" name="clientEmail" [(ngModel)]="clientEmail" required email placeholder="Email" #email="ngModel">
            @if (email.touched && email.errors?.['required']) {
              <div class="text-danger">El email es obligatorio.</div>
            }
            @if (email.touched && email.errors?.['email']) {
              <div class="text-danger">El email debe tener un formato válido.</div>
            }
          </div>
          <div class="form-group mb-3">
            <!--label-- for="clave">CUIT/Clave:</!--label-->
            <input type="text" class="form-control" id="clave" name="clientClave" [(ngModel)]="clientClave" required pattern="\d{2}-\d{8}-\d{1}" placeholder="CUIT/Clave" #clave="ngModel">
            @if (clave.touched && clave.errors?.['required']) {
              <div class="text-danger">El CUIT es obligatorio.</div>
            }
            @if (clave.touched && clave.errors?.['pattern']) {
              <div class="text-danger">El CUIT debe tener el formato XX-XXXXXXXX-X.</div>
            }
          </div>
          <div class="form-group mb-3">
            <!--label for="direccion">Dirección:</!--label-->
            <input type="text" class="form-control" id="direccion" name="clientDireccion" [(ngModel)]="clientDireccion" required minlength="5" placeholder="Dirección" #direccion="ngModel">
            @if (direccion.touched && direccion.errors?.['required']) {
              <div class="text-danger">La dirección es obligatoria.</div>
            }
            @if (direccion.touched && direccion.errors?.['minlength']) {
              <div class="text-danger">La dirección debe tener al menos 5 caracteres.</div>
            }
          </div>
          <div class="form-group mb-3">
            <label for="budgetDate">Fecha del Presupuesto:</label>
            <input type="date" class="form-control" id="budgetDate" name="budgetDate" [(ngModel)]="budgetDate" required #budgetDate="ngModel"  (change)="onDateChange($event)">
            @if (budgetDate.touched && budgetDate.errors?.['required']) {
              <div class="text-danger">La fecha del presupuesto es obligatoria.</div>
            }
          </div>
          <div class="form-group mb-3">
            <!--label for="additionalDetails">Detalles Adicionales:</!--label-->
            <textarea class="form-control" id="additionalDetails" name="additionalDetailsClient" [(ngModel)]="additionalDetailsClient" rows="3" placeholder="Detalles opcionales"></textarea>
          </div>
          <div class="modal-footer d-flex justify-content-between">
            <button type="button" class="btn btn-secondary" data-bs-target="#listaClientesModal" data-bs-toggle="modal">Lista</button>
            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal" [disabled]="!clientForm.valid || isSavingClient">
              <span *ngIf="!isSavingClient">Guardar</span>
              <span *ngIf="isSavingClient"><span class="spinner-border spinner-border-sm"></span> Guardando...</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<!--div-- class="modal fade" id="listaClientesModal" aria-hidden="true" aria-labelledby="listaClientesLabel" tabindex="-1" (shown.bs.modal)="getClientesByUserCode()">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="listaClientesLabel">Lista de Clientes Asociados</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table class="table table-striped  table-bordered ">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Contacto</th>
              <th>Email</th>
              <th>CUIT/Clave</th>
              <th>Dirección</th>
              <th>Fecha del Presupuesto</th>
              <th>Detalles Adicionales</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let cliente of clientes">
              <td>{{ cliente.name }}</td>
              <td>{{ cliente.contact }}</td>
              <td>{{ cliente.email }}</td>
              <td>{{ cliente.clave }}</td>
              <td>{{ cliente.direccion }}</td>
              <td>{{ cliente.budgetDate }}</td>
              <td>{{ cliente.additionalDetails }}</td>
              <td>
                 <div class="alineacion">
                  <button class="btn btn-danger bot">Elimiar</button>
                  <button class="btn btn-success bot">Editar</button>
                </div>
              </td>
            </tr>
            <tr *ngIf="clientes.length === 0">
              <td colspan="7" class="text-center">No hay clientes asociados a este userCode.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"  >Cerrar</button>
      </div>
    </div>
  </div>
</!--div-->


<div class="modal fade" id="listaClientesModal" aria-hidden="true" aria-labelledby="listaClientesLabel" tabindex="-1" (shown.bs.modal)="getClientesByUserCode()">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="listaClientesLabel">Lista de Clientes Asociados</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="table-responsive">
          <table class="table table-striped table-bordered table-hover table-sm">
            <thead class="table-light">
              <tr>
                <th scope="col">Nombre</th>
                <th scope="col">Contacto</th>
                <th scope="col">Email</th>
                <th scope="col">CUIT/Clave</th>
                <th scope="col">Dirección</th>
                <th scope="col">Fecha</th>
                <th scope="col">Detalles</th>
                <th scope="col">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let cliente of paginatedClientes">
                <td>{{ cliente.name }}</td>
                <td>{{ cliente.contact }}</td>
                <td>{{ cliente.email }}</td>
                <td>{{ cliente.clave }}</td>
                <td>{{ cliente.direccion }}</td>
                <td>{{ cliente.budgetDate }}</td>
                <td>{{ cliente.additionalDetails }}</td>
                <td>
                  <div class="d-flex gap-2">
                    <button class="btn btn-danger btn-sm" (click)="cliente.id && solicitarConfirmacionEliminar(cliente.id)">Eliminar</button>
                    <button class="btn btn-success btn-sm" *ngIf="cliente.id !== undefined" (click)="editarCliente(cliente.id)">Editar</button>
                  </div>
                </td>
              </tr>
              <tr *ngIf="paginatedClientes.length === 0">
                <td colspan="8" class="text-center">No hay clientes asociados a este userCode.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Controles de paginación -->
        <nav aria-label="Paginación de clientes" *ngIf="clientes.length > itemsPerPage">
          <ul class="pagination justify-content-center flex-wrap">
            <li class="page-item" [class.disabled]="currentPage === 1">
              <a class="page-link" (click)="previousPage()" aria-label="Anterior">
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>
            <li class="page-item" *ngFor="let page of getPages()" [class.active]="currentPage === page">
              <a class="page-link" (click)="setPage(page)">{{ page }}</a>
            </li>
            <li class="page-item" [class.disabled]="currentPage === totalPages">
              <a class="page-link" (click)="nextPage()" aria-label="Siguiente">
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" >
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Agregar datos de tu Empresa</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" style="padding: 10px; background-image: linear-gradient(to top, #ffffff, #fafafd, #f4f6fc, #edf3fb, #e5eff9); border-radius: 10px; box-shadow: rgba(0, 0, 0, 0.18) 0px 2px 4px;">
        <p style="text-align: center; font-size: 12px;">
          Podés editar estos datos las veces que quieras.
        </p>
        <div class="form-group mb-3">
          <label for="empresaName">Tu Empresa</label>
          <input type="text" class="form-control" id="empresaName" [(ngModel)]="empresaName" placeholder="¿Cómo se llama?">
        </div>
        <div class="form-group mb-3">
          <label for="empresaPhone">Teléfono:</label>
          <input type="text" class="form-control" id="empresaPhone" [(ngModel)]="empresaPhone" placeholder="Teléfono de tu empresa">
        </div>
        <div class="form-group mb-3">
          <label for="empresaEmail">Email:</label>
          <input type="email" class="form-control" id="empresaEmail" [(ngModel)]="empresaEmail" placeholder="Email de tu empresa">
        </div>
        <div class="form-group mb-3">
          <label for="additionalDetailsempresa">Descripción de tu empresa:</label>
          <textarea class="form-control" id="additionalDetailsempresa" [(ngModel)]="additionalDetailsEmpresa" rows="3" placeholder="Cuenta a tus clientes de qué se trata tu empresa"></textarea>
        </div>
        <!-- Solo un botón para subir imagen, controlado por TS -->
        <button class="btn btn-primary" type="button" (click)="abrirModalImagen()">Subir imagen</button>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="saveFormData()">Guardar</button>
      </div>
    </div>
  </div>
</div>






<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" >
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="imageModalLabel">Subir Imagen</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" style="text-align: center;">
        <div id="imageCircle" style="display: flex; justify-content: center;">
          <img #modalImagePreview class="img-fluid" src="#" alt="Previsualización de la imagen" style="display: none; width: 80%; height: 80%;">
        </div>
        <p #uploadMessage style="margin-top: 10px; color: rgb(6, 113, 254); display: none;">Imagen subida</p>
        <input type="file" #imageInput accept="image/*" class="form-control" style="margin-top: 10px;" (change)="onImageChange($event)">
        <p>formato cuadrado recomendado</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="uploadImage()" [disabled]="!imageSelected" >Cargar Imagen</button>
  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Volver</button>
      </div>
    </div>
  </div>
</div>





