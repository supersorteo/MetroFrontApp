<div class="dashboard-container">
  <div class="container" style="box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1); max-width: 800px;">
    <div class="program-title" id="portada" style="border-radius: 10px;" *ngIf="!isContentVisible">
      <h6 style="font-size: 12px; margin-bottom: 0px;">Orbita software</h6>
    </div>

    <div id="ingreso" class="ingreso" style="box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.897);" *ngIf="!isContentVisible">
      <div class="imagen-container">
        <img src="https://www.metroapp.site/metrologo.jpg" class="w-10rem logo-img" alt="Metro logo">
      </div>

      <div class="text-center bg-gradient">
        <h3>Bienvenido</h3>
        <div class="form-group" id="ingreso-codigo" style="font-size: 20px; margin: 10px;">
          <label for="password">Ingrese su código:</label>
          <input type="text" id="password" class="form-control" [(ngModel)]="code" placeholder="Ingrese su código" autocomplete="current-password" style="font-size: 30px; text-align: center;">
          <button class="btn btn-primary" style="font-size: 16px; font-weight: bold; width: 100%; height: 50px; margin-top: 20px;" (click)="login()">ENTRAR</button>
          <button id="mercadoPagoButton" class="btn btn-primary" style="font-size: 16px; font-weight: bold; width: 100%; height: 50px; margin-top: 20px;" (click)="ocultarContenido()">PROBÁ EL SISTEMA</button>
          <button type="button" class="btn btn-primary" style="font-size: 16px; font-weight: bold; width: 100%; height: 50px; margin-top: 20px;" data-bs-toggle="modal" data-bs-target="#exampleModal">REGISTRATE</button>
          <button type="button" class="btn btn-gradient" (click)="openCalculadora()" style="font-size: 16px; font-weight: bold; width: 100%; height: 50px; margin-top: 20px;">CALCULADORA DE MATERIALES</button>
          <button type="button" class="btn btn-success" style="font-size: 16px; font-weight: bold; width: 100%; height: 50px; margin-top: 20px;" (click)="openWebsite()">Comprá un código por Whatsapp</button>
          <p class="text-center mt-3" style="font-size: 12px;">Valor, $3.800 arg. Te dura 3 meses y tenés acceso a la calculadora de materiales</p>
          <button id="whatsapp-share" class="btn btn-whatsapp" (click)="shareOnWhatsApp()">Compartir en WhatsApp</button>
        </div>
      </div>

      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" #exampleModal>
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Registrar Código y Email</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form>
                <div class="mb-3">
                  <label for="code" class="col-form-label">Código:</label>
                  <input type="text" class="form-control" id="code" [(ngModel)]="code" placeholder="Ingrese su código" name="code" (input)="validateForm()">
                </div>
                <div class="mb-3">
                  <label for="email" class="col-form-label">Email:</label>
                  <input type="email" class="form-control" id="email" [(ngModel)]="email" placeholder="Ingrese su correo" name="email" (input)="validateForm()">
                </div>
                <!--div-- class="mb-3">
                  <label for="username" class="col-form-label">Username:</label>
                  <input type="text" class="form-control" id="username" [(ngModel)]="username" placeholder="Ingrese su nombre de usuario" name="username" (input)="validateForm()">
                </!--div-->
                <div class="mb-3">
                  <label for="telefono" class="col-form-label">Teléfono:</label>
                  <input type="text" class="form-control" id="telefono" [(ngModel)]="telefono" placeholder="Teléfono" name="telefono" (input)="validateForm()">
                </div>
           <div class="mb-3">
                  <label for="pais" class="col-form-label">País:</label>
                  <ng-select
                    [items]="countries"
                    bindLabel="nombre"
                    bindValue="nombre"
                    [(ngModel)]="pais"
                    name="pais"
                    id="pais"
                    (change)="onPaisChange()"
                    placeholder="País"
                    [clearable]="true"
                  >
                    <ng-template ng-option-tmp let-item="item" let-selected="selected">
                      <img [src]="item.flag" width="20" class="me-2" />
                      {{ item.nombre }}
                      <span *ngIf="selected" class="float-end text-success"><i class="bi bi-check-lg"></i></span>
                    </ng-template>
                  </ng-select>
                </div>
                <div class="mb-3">
                  <label for="provincia" class="col-form-label">Provincia:</label>
                  <select class="form-select" id="provincia" [(ngModel)]="provincia" name="provincia" (change)="validateForm()">
                    <option value="" disabled selected>Seleccione una provincia</option>
                    <option *ngFor="let provincia of provincias" [value]="provincia.nombre">{{ provincia.nombre }}</option>
                  </select>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" [disabled]="!isFormValid" (click)="register()">Registrar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
